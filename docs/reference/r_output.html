<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Tell SLiM to produce easily parseable output — r_output • slimr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Tell SLiM to produce easily parseable output — r_output"><meta property="og:description" content="Use this function in a slim_block call and it will be
converted in the SLiM script into code to make formatted output.
This output can easily be read into R and even dynamically read
during simulation runs with slim_run from the
slimr package. This function should generally only be
used within a slim_block call"><meta property="og:image" content="https://rdinnager.github.io/slimr/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">slimr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Custom_vis.html">Custom Live Plotting for SLiM</a>
    </li>
    <li>
      <a href="../articles/simple_example_using_migration_and_fst.html">simple_example_using_migration_and_fst</a>
    </li>
    <li>
      <a href="../articles/installing_SLiM_for_slimr.html">How to Install SLiM for Use with slimr</a>
    </li>
    <li>
      <a href="../articles/simple_nucleotide_example.html">Simple Example of a Simulation using Nucleotides</a>
    </li>
    <li>
      <a href="../articles/slimrlang_intro.html">Introduction to slimr: Writing SLiM scripts from R</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/rdinnager/slimr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Tell SLiM to produce easily parseable output</h1>
    <small class="dont-index">Source: <a href="https://github.com/rdinnager/slimr/blob/HEAD/R/slimr_output.R" class="external-link"><code>R/slimr_output.R</code></a></small>
    <div class="hidden name"><code>r_output.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Use this function in a <code><a href="slim_block.html">slim_block</a></code> call and it will be
converted in the SLiM script into code to make formatted output.
This output can easily be read into R and even dynamically read
during simulation runs with <code><a href="slim_run.html">slim_run</a></code> from the
<code>slimr</code> package. This function should generally only be
used within a <code><a href="slim_block.html">slim_block</a></code> call</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">r_output</span><span class="op">(</span></span>
<span>  <span class="va">slimr_expr</span>,</span>
<span>  <span class="va">name</span>,</span>
<span>  do_every <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  send_to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"file"</span><span class="op">)</span>,</span>
<span>  file_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".txt"</span><span class="op">)</span>,</span>
<span>  format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"csv"</span>, <span class="st">"fst"</span><span class="op">)</span>,</span>
<span>  type <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  expression <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  time_counter <span class="op">=</span> <span class="va">community.tick</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">slimr_output</span><span class="op">(</span></span>
<span>  <span class="va">slimr_expr</span>,</span>
<span>  <span class="va">name</span>,</span>
<span>  do_every <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  send_to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"file"</span><span class="op">)</span>,</span>
<span>  file_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".txt"</span><span class="op">)</span>,</span>
<span>  format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"csv"</span>, <span class="st">"fst"</span><span class="op">)</span>,</span>
<span>  type <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  expression <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  time_counter <span class="op">=</span> <span class="va">community.tick</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>slimr_expr</dt>
<dd><p>A SLiM expression to generate output. This can either be
a SLiM expression designed to create output, such as <code><a href="outputFull.html">outputFull()</a></code>,
or an object created in the SLiM code, in which case <code>slimr_output</code>
will automatically concatenate it to a string and output it</p></dd>


<dt>name</dt>
<dd><p>The name to use to identify this output.</p></dd>


<dt>do_every</dt>
<dd><p>How often should the output be produced? Expressed
as an integer saying how many generations to run before producing output.
e.g. <code>do_every = 10</code> means to output every 10 generations of the
simulation.</p></dd>


<dt>send_to</dt>
<dd><p><strong>*deprecated*</strong> Where to send the output? This could be used
to send the output to be stored in the results object ("data"), or to an external file ("file").
This will no longer be available in future versions in favour of an option to have the results
stored as a pointer to an external file (to save memory).</p></dd>


<dt>file_name</dt>
<dd><p><strong>*deprecated*</strong> The file name to save output to if <code>send_to = "file"</code></p></dd>


<dt>format</dt>
<dd><p><strong>*deprecated*</strong> The file format to save data if <code>send_to = "file"</code>, Only "csv" is implemented
but there are plans to support "fst" and "disk.frame".</p></dd>


<dt>type</dt>
<dd><p>Provide a custom type to the output. Used mostly for internal purposes.</p></dd>


<dt>expression</dt>
<dd><p>Provide a custom expression to be included with the output.
Used mostly for internal purposes.</p></dd>


<dt>time_counter</dt>
<dd><p>Expression used to extract the simulation time from SLiM. By default this
uses the global timing mechanism in SLiM version &gt;4.0: `community.tick`. For versions &lt;4.0,
use `sim.generation` instead (this parameter is for backwards compatability with old SLiM versions)</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>An expression with the code to be run in SLiM.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="slim_script.html">slim_script</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="slim_block.html">slim_block</a></span><span class="op">(</span><span class="fu"><a href="callback_initialize.html">initialize</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>             <span class="op">{</span></span></span>
<span class="r-in"><span>               <span class="fu"><a href="initializeMutationRate.html">initializeMutationRate</a></span><span class="op">(</span><span class="fl">1e-7</span><span class="op">)</span>;</span></span>
<span class="r-in"><span>               <span class="fu"><a href="initializeMutationType.html">initializeMutationType</a></span><span class="op">(</span><span class="st">"m1"</span>, <span class="fl">0.5</span>, <span class="st">"f"</span>, <span class="fl">0.0</span><span class="op">)</span>;</span></span>
<span class="r-in"><span>               <span class="fu"><a href="initializeGenomicElementType.html">initializeGenomicElementType</a></span><span class="op">(</span><span class="st">"g1"</span>, <span class="va">m1</span>, <span class="fl">1.0</span><span class="op">)</span>;</span></span>
<span class="r-in"><span>               <span class="fu"><a href="initializeGenomicElement.html">initializeGenomicElement</a></span><span class="op">(</span><span class="va">g1</span>, <span class="fl">0</span>, <span class="fl">99999</span><span class="op">)</span>;</span></span>
<span class="r-in"><span>               <span class="fu"><a href="initializeRecombinationRate.html">initializeRecombinationRate</a></span><span class="op">(</span><span class="fl">1e-8</span><span class="op">)</span>;</span></span>
<span class="r-in"><span>             <span class="op">}</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="slim_block.html">slim_block</a></span><span class="op">(</span><span class="fl">1</span>,</span></span>
<span class="r-in"><span>             <span class="op">{</span></span></span>
<span class="r-in"><span>               <span class="fu">sim.addSubpop</span><span class="op">(</span><span class="st">"p1"</span>, <span class="fl">100</span><span class="op">)</span>;</span></span>
<span class="r-in"><span>             <span class="op">}</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="slim_block.html">slim_block</a></span><span class="op">(</span><span class="fl">100</span>,</span></span>
<span class="r-in"><span>             <span class="op">{</span></span></span>
<span class="r-in"><span>               <span class="fu">r_output</span><span class="op">(</span><span class="fu">p1.outputVCFSample</span><span class="op">(</span>sampleSize <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>, name <span class="op">=</span> <span class="st">"VCF"</span><span class="op">)</span>;</span></span>
<span class="r-in"><span>               <span class="fu">sim.simulationFinished</span><span class="op">(</span><span class="op">)</span>;</span></span>
<span class="r-in"><span>             <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span><span class="fu"><a href="slim_run.html">slim_run</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">run_w_out</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Simulation finished with exit status: 0</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Success!</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">run_w_out</span><span class="op">$</span><span class="va">output_data</span><span class="op">$</span><span class="va">data</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> #OUT: 100 100 SV p1 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##fileformat=VCFv4.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##fileDate=20230717</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##source=SLiM</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##INFO=&lt;ID=MID,Number=.,Type=Integer,Description="Mutation ID in SLiM"&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##INFO=&lt;ID=S,Number=.,Type=Float,Description="Selection Coefficient"&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##INFO=&lt;ID=DOM,Number=.,Type=Float,Description="Dominance"&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##INFO=&lt;ID=PO,Number=.,Type=Integer,Description="Population of Origin"&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##INFO=&lt;ID=TO,Number=.,Type=Integer,Description="Tick of Origin"&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##INFO=&lt;ID=MT,Number=.,Type=Integer,Description="Mutation Type"&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##INFO=&lt;ID=AC,Number=.,Type=Integer,Description="Allele Count"&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##INFO=&lt;ID=DP,Number=1,Type=Integer,Description="Total Depth"&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##INFO=&lt;ID=MULTIALLELIC,Number=0,Type=Flag,Description="Multiallelic"&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##FORMAT=&lt;ID=GT,Number=1,Type=String,Description="Genotype"&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> #CHROM	POS	ID	REF	ALT	QUAL	FILTER	INFO	FORMAT	i0	i1	i2	i3	i4	i5	i6	i7	i8	i9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1	64319	.	A	T	1000	PASS	MID=63;S=0;DOM=0.5;PO=1;TO=33;MT=1;AC=5;DP=1000	GT	0|0	0|0	0|0	0|1	0|0	1|0	0|0	0|1	0|1	0|1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1	89835	.	A	T	1000	PASS	MID=175;S=0;DOM=0.5;PO=1;TO=91;MT=1;AC=2;DP=1000	GT	0|0	0|0	0|0	0|0	0|0	0|0	0|0	0|1	0|1	0|0</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Russell Dinnage, Stephen Sarre, Bernd Gruber, Richard Duncan.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

